<odoo>
  <data>

      <!--FORM-->
      <record model="ir.ui.view" id="res_partner_referral_gifts">
          <field name="name">res.partner.files</field>
          <field name="model">res.partner</field>
          <field name="inherit_id" ref="base.view_partner_form"/>
          <field name="arch" type="xml">

              <!--Historico productos-->
              <div name="button_box"  position="inside">
                  <button class="oe_stat_button"
                          string="Productos Regalados"
                          name="%(am_referral_program.action_free_products)d"
                          type="action"
                          context="{'search_default_partner_related_id': active_id}"
                          groups="am_personalizations.group_manager"
                          icon="fa-gift"/>
                  <button class="oe_stat_button"
                          string="Historico Productos"
                          name="%(am_referral_program.action_free_products_historic)d"
                          type="action"
                          context="{'search_default_partner_related_id': active_id}"
                          groups="am_personalizations.group_manager"
                          icon="fa-list-alt"/>
              </div>

              <!--Pilas restantes-->
              <notebook position="inside">
                  <page name="free_products" string="Productos Gratis">
                        <button name="action_make_gift" type="object" string="Regalo"/>
                        <field name="product_ids" readonly="True">
                            <tree  decoration-danger="uds &lt; 0">
                                <field name="product_id"/>
                                <field name="uds"/>
                                <field name="discount"/>
                            </tree>
                            <form string="Productos Gratuitos">
                                <group>
                                    <field name="product_id"/>
                                    <field name="uds"/>
                                    <field name="discount" readonly="1"/>
                                </group>
                            </form>
                        </field>
                  </page>
                  <page name="free_products_historic" string="Historico" groups="am_personalizations.group_manager">
                        <field name="product_historic_ids">
                            <tree editable="bottom" >
                                <field name="product_id"/>
                                <field name="uds"/>
                                <field name="discount"/>
                                <field name="datetime" readonly="1"/>
                            </tree>
                            <form string="Historico Productos">
                                <group>
                                    <group>
                                        <separator string="Producto"/>
                                        <field name="product_id"/>
                                        <field name="uds"/>
                                        <field name="discount" readonly="1"/>
                                    </group>
                                    <group>
                                        <separator string="Pedido"/>
                                        <field name="pos_order_id"/>
                                        <field name="sale_order_id"/>
                                    </group>
                                </group>
                            </form>
                        </field>
                  </page>
              </notebook>
          </field>
      </record>




  </data>
</odoo>

